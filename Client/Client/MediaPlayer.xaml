<Window x:Class="Client.MediaPlayer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ffme="clr-namespace:Unosquare.FFME;assembly=ffme.win"
        mc:Ignorable="d"
        Title="Media Player" Height="360" Width="480" Background="Transparent" UseLayoutRounding="True" MinWidth="400" MinHeight="360" Icon="/res/MediaPlayerIcon.png" Unloaded="Window_Unloaded" KeyUp="Window_KeyUp" Loaded="Window_Loaded" Activated="Window_Focus" Deactivated="Window_Focus" FontFamily="/SegoeUI7/segoeui_0.ttf#Segoe UI">
    <Window.Resources>
        <Style x:Key="SliderRepeatButton" TargetType="RepeatButton">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="IsTabStop" Value="false" />
            <Setter Property="Focusable" Value="false" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Rectangle Height="3" Fill="Transparent"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SliderRepeatButton1" TargetType="RepeatButton">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Rectangle Height="3">
                            <Rectangle.Fill>
                                <ImageBrush ImageSource="/res/PlayerBarFullFill.png"></ImageBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SliderThumb" TargetType="Thumb">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Rectangle x:Name="Rectangle" Height="9" Width="17">
                            <Rectangle.Fill>
                                <ImageBrush ImageSource="/res/PlayerKnobNormal.png"></ImageBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="Rectangle" Property="Fill">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/res/PlayerKnobHover.png"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsDragging" Value="true">
                                <Setter TargetName="Rectangle" Property="Fill">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/res/PlayerKnobPressed.png"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="Slider"  TargetType="Slider">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Track Grid.Row="1" x:Name="PART_Track"   >
                    <Track.DecreaseRepeatButton>
                        <RepeatButton Style="{StaticResource SliderRepeatButton1}"  Command="Slider.DecreaseLarge" />
                    </Track.DecreaseRepeatButton>
                    <Track.Thumb>
                        <Thumb Style="{StaticResource SliderThumb}"  />
                    </Track.Thumb>
                    <Track.IncreaseRepeatButton>
                        <RepeatButton Style="{StaticResource SliderRepeatButton}" Command="Slider.IncreaseLarge" />
                    </Track.IncreaseRepeatButton>
                </Track>
            </Grid>
        </ControlTemplate>
        <Style x:Key="Horizontal_Slider" TargetType="Slider">
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Style.Triggers>
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="MinHeight" Value="9" />
                    <Setter Property="MinWidth" Value="104" />
                    <Setter Property="Template" Value="{StaticResource Slider}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Image Source="/res/MediaPlayerBG.png" Stretch="Fill" Margin="0,0,0,71"/>
        <TextBlock x:Name="Error" Text="Loading..." HorizontalAlignment="Center" Foreground="White" Margin="0,0,0,71" VerticalAlignment="Center" TextAlignment="Center">
            <TextBlock.Effect>
                <DropShadowEffect ShadowDepth="0" BlurRadius="20"/>
            </TextBlock.Effect>
        </TextBlock>
        <ffme:MediaElement x:Name="Video" Margin="0,0,0,71" UnloadedBehavior="Manual" LoadedBehavior="Manual" MediaFailed="Video_MediaFailed" MediaEnded="Video_MediaEnded" RenderOptions.BitmapScalingMode="Fant" LoopingBehavior="Manual">
            <ffme:MediaElement.ToolTip>
                <ToolTip>
                    <ToolTip.Content>
                        <TextBlock x:Name="ImageTooltip" TextWrapping="Wrap"/>
                    </ToolTip.Content>
                </ToolTip>
            </ffme:MediaElement.ToolTip>
        </ffme:MediaElement>
        <Grid x:Name="Controls">
            <Grid x:Name="TimeHolder" VerticalAlignment="Bottom" Margin="7,0,7,57" Height="9">
                <Image Source="/res/PlayerBarEmptyEdge.png" Stretch="None" HorizontalAlignment="Left"/>
                <Image Source="/res/PlayerBarEmptyFill.png" Stretch="Fill" Margin="3,0,3,0" Height="6"/>
                <Image Source="/res/PlayerBarEmptyEdge.png" Stretch="None" HorizontalAlignment="Right" RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="-1"/>
                            <SkewTransform/>
                            <RotateTransform/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>
                <Slider Style="{StaticResource Horizontal_Slider}" x:Name="physicalSlider" Maximum="1" Value="0" ValueChanged="Slider_ValueChanged" Margin="3,0,0,0" Cursor="Hand" IsMoveToPointEnabled="True"/>
            </Grid>
            <Image Stretch="None" Source="/res/ViewerFrame.png" VerticalAlignment="Bottom" Margin="0,0,0,5"/>
            <Image x:Name="Play" Source="/res/MediaPlayNormal.png" Height="48" VerticalAlignment="Bottom" Margin="0,0,0,7" HorizontalAlignment="Center" MouseEnter="Play_MouseEnter" MouseLeave="Play_MouseLeave" MouseDown="Play_MouseDown" MouseUp="Play_MouseUp" Stretch="None"/>
            <Image x:Name="Next" Source="/res/ViewerForwardNormal.png" Height="25" VerticalAlignment="Bottom" Margin="95,0,0,17" HorizontalAlignment="Center" MouseEnter="Next_MouseEnter" MouseLeave="Next_MouseLeave" MouseDown="Next_MouseDown" MouseUp="Next_MouseUp" ToolTip="Next"/>
            <Image x:Name="Back" Source="/res/ViewerBackNormal.png" Height="25" VerticalAlignment="Bottom" Margin="0,0,95,17" HorizontalAlignment="Center" MouseDown="Back_MouseDown" MouseEnter="Back_MouseEnter" MouseLeave="Back_MouseLeave" MouseUp="Back_MouseUp" ToolTip="Back"/>
            <Grid x:Name="Volume" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="223,0,0,17" Width="37" Height="25" ToolTip="Volume" MouseLeave="Volume_MouseLeave" MouseEnter="Volume_MouseEnter" MouseDown="Volume_MouseDown" MouseUp="Volume_MouseUp">
                <Grid.Background>
                    <ImageBrush ImageSource="/res/VolumeSelectNormal.png"/>
                </Grid.Background>
                <Image HorizontalAlignment="Left" VerticalAlignment="Center" Stretch="None" Source="/res/Volume4.png" Margin="1,0,0,0"/>
            </Grid>
            <Rectangle x:Name="VolumeBox" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="223,0,0,54" Width="31" Height="120" Fill="White" Stroke="Silver" Visibility="Collapsed"/>
            <Slider x:Name="VolumeSlider" Orientation="Vertical" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="224,0,0,59" Width="22" Height="110" IsSnapToTickEnabled="True" Maximum="100" Visibility="Collapsed" ToolTip="Seek" Value="100"/>
            <Grid x:Name="VolumeTooltip" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="224,0,0,184" Width="31" Height="18" Visibility="Collapsed">
                <Rectangle Fill="White" Stroke="Silver"/>
                <Label x:Name="VolumeTooltipText" Foreground="DimGray" Content="18" Padding="0" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
            <Grid x:Name="Stop" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,190,17" Width="27" Height="25" ToolTip="Stop" MouseLeave="Button_MouseLeave" MouseEnter="Button_MouseEnter" MouseDown="Button_MouseDown" MouseUp="Stop_MouseUp">
                <Image x:Name="StopIcon" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="None" Source="/res/Stop1.png"/>
            </Grid>
            <Grid x:Name="Repeat" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,268,17" Width="27" Height="25" ToolTip="Repeat" MouseLeave="Button_MouseLeave" MouseEnter="Button_MouseEnter" MouseDown="Button_MouseDown" MouseUp="Repeat_MouseUp">
                <Image x:Name="RepeatIcon" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="None" Source="/res/Repeat0.png"/>
            </Grid>
            <Ellipse x:Name="TimeShadow" Width="37" Height="15" VerticalAlignment="Bottom" Margin="0,0,389,22" HorizontalAlignment="Center" Fill="White" Opacity="0.65">
                <Ellipse.Effect>
                    <BlurEffect Radius="16"/>
                </Ellipse.Effect>
            </Ellipse>
            <TextBlock x:Name="Time" VerticalAlignment="Bottom" Text="00:00" Margin="0,0,390,22" HorizontalAlignment="Center"/>
        </Grid>
    </Grid>
</Window>
